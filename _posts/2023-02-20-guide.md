---
keywords: fastai
description: This notebook will guide you step-by-step on how to configure your AWS instance and deploy your backend. Special thanks to Azeem Khan and Jeffery.
title: Akshat's AWS Guide for Deployment
toc: true
badges: false
categories: [notebook]
layout: base
nb_path: _notebooks/2023-02-20-guide.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-02-20-guide.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Step-1">Step 1<a class="anchor-link" href="#Step-1"> </a></h1><h2 id="Access-AWS!!!">Access AWS!!!<a class="anchor-link" href="#Access-AWS!!!"> </a></h2><ul>
<li><p>access <a href="https://aws.amazon.com/marketplace/management/signin">aws</a></p>
</li>
<li><p>Set your region to Ohio</p>
</li>
<li><p>Find EC2, should be there.</p>
</li>
<li><p>Navigate to instances</p>
</li>
<li><p>Find NCS.cf Yeung CSP or NCS.gq Mort CSP and click connect.</p>
</li>
<li><p>Type in cd ~</p>
</li>
<li><p>Run the commands below:</p>
</li>
</ul>
<p>First you type in: $ virtualenv -p /usr/bin/python3 webapp</p>
<p>Then type: $ source webapp/bin/activate</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Step-2">Step 2<a class="anchor-link" href="#Step-2"> </a></h1><h2 id="PORTS!!!">PORTS!!!<a class="anchor-link" href="#PORTS!!!"> </a></h2><ol>
<li>Run sudo docker ps</li>
</ol>
<p>You should see a huge list of ports regarding your project name.</p>
<p>Select a port that is not in use, anything in the 8000s.</p>
<p>Then go to your backend repo, this is your flask.</p>
<p>Make sure your Dockerfile matches what it says below:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now Type in sudo docker-compose up in your terminal</p>
<p>After that type in the link in your browser: something like <a href="https://localhost:PORTNUMBER">https://localhost:PORTNUMBER</a>.. if this works, push your changes and your good.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Step-3">Step 3<a class="anchor-link" href="#Step-3"> </a></h1><h2 id="AWS!!!">AWS!!!<a class="anchor-link" href="#AWS!!!"> </a></h2><p>In the AWS terminal;</p>
<ul>
<li><p>go to your repo by cding</p>
</li>
<li><p>git clone your flask</p>
</li>
<li><p>run $ pip install -r requirements.txt</p>
</li>
<li><p>go to main.py file and run python3 main.py, if it works, good job.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><p>now type in docker-compose up -d --build</p>
</li>
<li><p>now curl your site by typing - curl localhost:PORTNUMBER</p>
</li>
<li><p>If it shows you a bunch of HTML, this is a good sign and now your almost done.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NGINX-stuff-via-Azeem-Khan-&amp;-Jeffery-F.">NGINX stuff via Azeem Khan &amp; Jeffery F.<a class="anchor-link" href="#NGINX-stuff-via-Azeem-Khan-&amp;-Jeffery-F."> </a></h2><p>So it turns out Jeffery created a pretty good guide for nginx stuff, here is a link to access it: <a href="https://moonpiedumplings.github.io/quartotest/posts/duckdns/">Jeffrey's guide to duckdns</a></p>
<p>make sure to create your own config file: you can type in $ sudo nano PROJECTNAME</p>
<p>My friend Azeem did a great job by including how your config file should look like so here it is:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><p>save changes - CTRL X</p>
</li>
<li><p>create a link:</p>
</li>
</ul>
<p>$ cd /etc/nginx/sites-enabled</p>
<p>$ ln -s /etc/nginx/sites-available/PROJECTNAME/etc/nginx/sites-enabled</p>
<p>then type $ sudo nginx -t</p>
<ul>
<li>now you have to restart so run:</li>
</ul>
<p>sudo systemctl restart nginx</p>
<ul>
<li>check if it works on chrome or your preferred browser. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Step-4">Step 4<a class="anchor-link" href="#Step-4"> </a></h1><h2 id="Certification-stuff">Certification stuff<a class="anchor-link" href="#Certification-stuff"> </a></h2><p>Certbot allows your site to be HTTPS, this is good.</p>
<h2 id="Run-commands-below">Run commands below<a class="anchor-link" href="#Run-commands-below"> </a></h2><p>$ cd</p>
<p>$ sudo snap install core; sudo snap refresh core</p>
<p>$ sudo snap install --classic certbot</p>
<p>$ sudo ln -s /snap/bin/certbot</p>
<p>$ sudo certbot --nginx</p>
<p>My friend Azeem helped me understand why we need https and a valid certificate, he taught me to run these commands.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Final-Step">Final Step<a class="anchor-link" href="#Final-Step"> </a></h1><h2 id="What-if-I-wanted-to-change-code-or-any-other-stuff?">What if I wanted to change code or any other stuff?<a class="anchor-link" href="#What-if-I-wanted-to-change-code-or-any-other-stuff?"> </a></h2><ul>
<li><p>cd to your project</p>
</li>
<li><p>type:</p>
</li>
</ul>
<p>sudo docker-compose ps</p>
<ul>
<li>now type:</li>
</ul>
<p>sudo docker ps</p>
<ul>
<li><p>run: git status (to see if there are changes)</p>
</li>
<li><p>type in:</p>
</li>
</ul>
<p>sudo docker-compose kill</p>
<p>now it should say 502 BAD GATEWAY</p>
<ul>
<li><p>make sure to git pull</p>
</li>
<li><p>type in:</p>
</li>
</ul>
<p>sudo docker-compose up -d --build</p>
<ul>
<li>restart:</li>
</ul>
<p>sudo systemctl restart nginx</p>
<ul>
<li>cd into your project and type in curl localhost:PORTNUMBER</li>
</ul>
<p>You can probably see changes saving</p>
<ul>
<li>now type in your url in browser and see if the changes saved. </li>
</ul>
<p>If it did, good job, it worked!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Acknowledgements">Acknowledgements<a class="anchor-link" href="#Acknowledgements"> </a></h2><p>Azeem Khan helped me understand a few steps regarding this blog, Jeffery also made a good nginx guide, so I am willing to acknowledge them for helping me develop this guide.</p>
<p>Thank you</p>

</div>
</div>
</div>
</div>
 

